{
  "project": "LifeNote",
  "branchName": "ralph/note-app-features",
  "description": "Apple-inspired note-taking app with glass morphism design, block-based editor, local storage, and intuitive navigation",
  "userStories": [
    {
      "id": "US-001",
      "title": "Glass morphism design system",
      "description": "As a user, I want the app to have an Apple-inspired glass morphism design with transparent backgrounds and soft shadows.",
      "acceptanceCriteria": [
        "CSS variables for glass backgrounds (light/dark mode)",
        "CSS variables for glass borders with transparency",
        "Three-tier shadow system (small, medium, big) with inset highlights",
        "Backdrop filter: blur(20px) saturate(180%)",
        "Applied to desktop-container and app-window-main",
        "Typecheck passes"
      ],
      "priority": 1,
      "passes": true,
      "notes": "Completed. Variables in styles/variables.css. Glass applied to page.css and AppWindow.css"
    },
    {
      "id": "US-002",
      "title": "GlassButton component with variants",
      "description": "As a developer, I need a reusable button component with multiple style variants for consistent UI.",
      "acceptanceCriteria": [
        "Default variant (standard glass style)",
        "Primary variant (blue accent)",
        "Danger variant (red accent for delete actions)",
        "Yellow variant (special actions)",
        "Unstyled variant (no background, light grey hover)",
        "Active variant (active state)",
        "Colored variants: only opacity changes on hover",
        "Icon support and ARIA labels",
        "Typecheck passes"
      ],
      "priority": 2,
      "passes": true,
      "notes": "Completed. Component in components/ui/GlassButton/"
    },
    {
      "id": "US-003",
      "title": "AppWindow layout with three-section header",
      "description": "As a user, I want a consistent app window layout with organized header sections.",
      "acceptanceCriteria": [
        "Three-section header using CSS Grid (left, middle, right)",
        "Left: Window controls, sidebar toggle, back button (conditional)",
        "Middle: App title (always visible, shows 'New Page' or page title)",
        "Right: Settings, Done, More, Delete buttons (conditional)",
        "Transparent main content with 10% blur",
        "Typecheck passes"
      ],
      "priority": 3,
      "passes": true,
      "notes": "Completed. Component in components/layout/AppWindow/"
    },
    {
      "id": "US-004",
      "title": "Collapsible sidebar with date grouping",
      "description": "As a user, I want a collapsible sidebar that organizes my notes by date.",
      "acceptanceCriteria": [
        "Desktop: Collapsible sidebar (fully closed when collapsed, no sneak peek)",
        "Mobile: Completely hidden (not rendered)",
        "Date-based grouping (Today, Yesterday, Previous 7 Days, etc.)",
        "Non-capitalized group titles",
        "New note button next to each group title",
        "Sidebar toggle in AppWindow header",
        "Typecheck passes"
      ],
      "priority": 4,
      "passes": true,
      "notes": "Completed. Component in components/layout/Sidebar/CollapsibleSidebar.tsx"
    },
    {
      "id": "US-005",
      "title": "Note CRUD with IndexedDB storage",
      "description": "As a user, I want to create, read, update, and delete notes that persist locally.",
      "acceptanceCriteria": [
        "Create notes via button or Cmd+N keyboard shortcut",
        "Notes stored in IndexedDB with Page structure (id, title, blocks, timestamps)",
        "Auto-save on navigation, ESC key, Back/Done buttons",
        "Manual save with Cmd+S keyboard shortcut",
        "Delete via swipe or header button with confirmation",
        "Auto-close editor if deleted note was active",
        "Typecheck passes"
      ],
      "priority": 5,
      "passes": true,
      "notes": "Completed. Storage in utils/storage.ts, store in stores/pageStore.ts"
    },
    {
      "id": "US-006",
      "title": "Swipe-to-delete on sidebar note items",
      "description": "As a user, I want to delete notes by swiping on sidebar items (like Apple Notes).",
      "acceptanceCriteria": [
        "Swipe right-to-left reveals trash icon",
        "Delete triggers at 50% swipe threshold",
        "Touch support for mobile",
        "Mouse drag support for desktop",
        "Delete button fixed to right edge (doesn't slide with item)",
        "Uses GlassButton with danger variant",
        "Smooth animations",
        "Typecheck passes"
      ],
      "priority": 6,
      "passes": true,
      "notes": "Completed. Component in components/layout/Sidebar/NoteItem.tsx"
    },
    {
      "id": "US-007",
      "title": "ListView with responsive grid",
      "description": "As a user, I want to see all my notes in a responsive grid layout.",
      "acceptanceCriteria": [
        "Flexbox-based responsive grid",
        "Maximum 3 columns, minimum item width 150px",
        "NoteItemFull component (no swipe delete)",
        "Date metadata positioned at bottom of card",
        "Empty states for no notes and no search results",
        "Search integration",
        "Typecheck passes"
      ],
      "priority": 7,
      "passes": true,
      "notes": "Completed. Component in components/views/ListView/"
    },
    {
      "id": "US-008",
      "title": "Search with yellow shadow highlighting",
      "description": "As a user, I want to search notes and see matching text highlighted.",
      "acceptanceCriteria": [
        "Search input in BottomToolbar (list view)",
        "Real-time filtering as user types",
        "Yellow shadow text highlight (not block background)",
        "Matching files reordered to top",
        "Group titles show search query with highlighting",
        "Typecheck passes"
      ],
      "priority": 8,
      "passes": true,
      "notes": "Completed. Highlight in utils/highlightText.tsx, styles in styles/utilities.css"
    },
    {
      "id": "US-009",
      "title": "Keyboard shortcuts system",
      "description": "As a user, I want keyboard shortcuts for common actions.",
      "acceptanceCriteria": [
        "Reusable useKeyboardShortcuts hook",
        "Platform-aware: cmd works on Mac (metaKey) and Windows (ctrlKey)",
        "Browser conflict prevention (capture phase event listeners)",
        "Input-safe (doesn't trigger when typing, except Escape)",
        "Global shortcuts: Cmd+N (new), Cmd+S (save)",
        "Editor shortcuts: ESC (save and go back)",
        "Typecheck passes"
      ],
      "priority": 9,
      "passes": true,
      "notes": "Completed. Hook in utils/keyboardShortcuts.ts, hooks in hooks/useGlobalShortcuts.ts and hooks/useEditorShortcuts.ts"
    },
    {
      "id": "US-010",
      "title": "Editable note title in TopBar",
      "description": "As a user, I want to edit the note title directly in the top bar.",
      "acceptanceCriteria": [
        "Click title to edit",
        "Save on blur or Enter key",
        "Cancel on Escape key",
        "Update first block content when title changes",
        "Fallback to 'Untitled' if empty",
        "Typecheck passes"
      ],
      "priority": 10,
      "passes": true,
      "notes": "Completed. Component in components/layout/TopBar/TopBar.tsx"
    },
    {
      "id": "US-016",
      "title": "Unified block menu config (single source of truth)",
      "description": "As a developer, I need a single config that drives both slash menu and bottom bar to keep menus synchronized.",
      "acceptanceCriteria": [
        "Create config/blockMenuConfig.ts with all block types and formatting options",
        "Each item has: id, label, icon, category, slashCommands[], shortcut (optional)",
        "Conditional visibility rules: showInSlashMenu(), showInBottomBar(selection)",
        "Categories: 'blocks' (paragraph, heading, etc.) and 'format' (bold, italic, etc.)",
        "Both SlashMenu and BottomToolbar consume from this single config",
        "Adding new item to config automatically appears in both menus",
        "Typecheck passes"
      ],
      "priority": 11,
      "passes": true,
      "notes": "Completed. Created config/blockMenuConfig.ts with all block types and formatting options. Includes helper functions for filtering items by context. Typecheck passes."
    },
    {
      "id": "US-017",
      "title": "Block editor core with useBlockEditor hook",
      "description": "As a developer, I need a hook that manages block CRUD operations adapted from NewPage-main.",
      "acceptanceCriteria": [
        "Create hooks/useBlockEditor.ts adapted from NewPage-main",
        "Block operations: addBlock, updateBlock, deleteBlock, moveBlock",
        "Integrates with editorStore (Zustand)",
        "Simplified block types: paragraph, heading (h1-h6), code, image, list, quote, table, divider",
        "Block structure: { id, type, content, props, indent }",
        "Typecheck passes"
      ],
      "priority": 12,
      "passes": true,
      "notes": "Completed. Created hooks/useBlockEditor.ts adapted from NewPage-main. Simplified version integrates with editorStore (Zustand). Includes addBlock, updateBlock, deleteBlock, moveBlock, duplicateBlock operations. Typecheck passes."
    },
    {
      "id": "US-018",
      "title": "Custom blue caret with glow animation",
      "description": "As a user, I want a distinctive blue caret that looks like a highlighter.",
      "acceptanceCriteria": [
        "Create components/ui/CustomCaret/CustomCaret.tsx",
        "Blue color (#007AFF) with glow effect (box-shadow)",
        "Blinking animation (opacity fade, not on/off)",
        "Positioned at cursor location in contentEditable",
        "Native caret hidden (caret-color: transparent)",
        "Blue text selection color (::selection)",
        "Typecheck passes"
      ],
      "priority": 13,
      "passes": true,
      "notes": "Completed. Created CustomCaret component with blue glow and blink animation. Added caret.css for selection styles and native caret hiding. Typecheck passes."
    },
    {
      "id": "US-019",
      "title": "Editable blocks with contentEditable",
      "description": "As a user, I want to edit text directly in blocks with natural typing behavior.",
      "acceptanceCriteria": [
        "Create components/blocks/EditableBlock.tsx as base component",
        "contentEditable div with controlled content",
        "Enter creates new block, Backspace on empty deletes block",
        "Tab/Shift+Tab for indent/outdent",
        "Slash key (/) opens slash menu at cursor position",
        "CustomCaret component integrated",
        "Paragraph and Heading blocks use EditableBlock",
        "Typecheck passes"
      ],
      "priority": 14,
      "passes": true,
      "notes": "Completed. Created EditableBlock base component with contentEditable. Updated Paragraph and Heading to use EditableBlock. Handles Enter (new block), Backspace (delete empty), / (slash menu), Tab (placeholder for indent). CustomCaret integrated. Typecheck passes."
    },
    {
      "id": "US-020",
      "title": "Slash menu with glass styling",
      "description": "As a user, I want to type / to open a menu for inserting blocks.",
      "acceptanceCriteria": [
        "Triggered by typing / in any editable block",
        "Glass morphism styling (var(--glass-bg-light), backdrop-filter)",
        "Absolute positioned at cursor (no backdrop overlay)",
        "Search/filter as user types after /",
        "Arrow keys + Enter for keyboard navigation",
        "Escape to close",
        "Items sourced from blockMenuConfig (US-016)",
        "Typecheck passes"
      ],
      "priority": 15,
      "passes": true,
      "notes": "Completed. Enhanced SlashMenu with glass styling (var(--glass-bg-light), backdrop-filter), absolute positioning at cursor, search/filter, keyboard navigation (arrow keys + Enter), Escape to close. Items sourced from blockMenuConfig. Created useSlashMenu hook for state management. Typecheck passes."
    },
    {
      "id": "US-021",
      "title": "Contextual bottom bar",
      "description": "As a user, I want the bottom bar to show relevant actions based on what I'm doing.",
      "acceptanceCriteria": [
        "State 1 - No selection/caret: Show block type buttons (paragraph, heading, list, etc.)",
        "State 2 - Text selected: Show formatting buttons (bold, italic, underline, etc.)",
        "State 3 - Block selected: Show block actions (move, duplicate, delete, convert)",
        "Items sourced from blockMenuConfig (US-016)",
        "Smooth transition between states",
        "Typecheck passes"
      ],
      "priority": 16,
      "passes": true,
      "notes": "Completed. Updated BottomToolbar to be contextual based on selection state. Shows block type buttons when no text selected, formatting buttons when text selected. Items sourced from blockMenuConfig. Updated GlassButton to accept string icons. Typecheck passes."
    },
    {
      "id": "US-022",
      "title": "Arrow key navigation between blocks",
      "description": "As a user, I want to navigate between blocks naturally with arrow keys.",
      "acceptanceCriteria": [
        "Create hooks/useBlockNavigation.ts",
        "Arrow Up at start of block moves to previous block (end)",
        "Arrow Down at end of block moves to next block (start)",
        "Arrow Left at position 0 moves to previous block",
        "Arrow Right at end moves to next block",
        "Focus management with proper caret positioning",
        "Typecheck passes"
      ],
      "priority": 17,
      "passes": true,
      "notes": "Completed. Created useBlockNavigation hook for arrow key navigation between blocks. Arrow Up/Left at start moves to previous block (end), Arrow Down/Right at end moves to next block (start). Integrated into EditableBlock. Typecheck passes."
    },
    {
      "id": "US-023",
      "title": "Text formatting with keyboard shortcuts",
      "description": "As a user, I want to format selected text with keyboard shortcuts.",
      "acceptanceCriteria": [
        "Cmd+B toggles bold",
        "Cmd+I toggles italic",
        "Cmd+U toggles underline",
        "Cmd+E toggles inline code",
        "Formatting stored in block.formats array with start/end positions",
        "Visual rendering of formatted text",
        "Paste link on selected text creates link",
        "Typecheck passes"
      ],
      "priority": 18,
      "passes": true,
      "notes": "Completed. Added formatting shortcuts (cmd+b, cmd+i, cmd+u, cmd+e) handled in EditableBlock. Created formatText.ts utilities for apply/remove/toggle formatting. Updated InlineFormat type to include underline, strikethrough, highlight. Formatting stored in block.formats array. BottomToolbar formatting buttons now functional. Typecheck passes."
    },
    {
      "id": "US-024",
      "title": "Markdown export",
      "description": "As a user, I want to export my notes as markdown files.",
      "acceptanceCriteria": [
        "Create utils/markdownExport.ts",
        "Converts blocks to standard markdown syntax",
        "Headings: # ## ### etc.",
        "Lists: - or 1. or - [ ]",
        "Code blocks with language",
        "Images with base64 or blob URLs",
        "Download as .md file with note title as filename",
        "Typecheck passes"
      ],
      "priority": 19,
      "passes": true,
      "notes": "Completed. Created markdownExport.ts with exportPageToMarkdown() and downloadPageAsMarkdown(). Converts blocks to standard markdown syntax (headings, lists, code blocks, images, etc.). Handles inline formatting (bold, italic, links, etc.). Downloads as .md file with page title as filename. Typecheck passes."
    },
    {
      "id": "US-011",
      "title": "Voice input functionality",
      "description": "As a user, I want to input notes using voice.",
      "acceptanceCriteria": [
        "Voice input button in BottomToolbar",
        "Web Speech API integration",
        "Visual feedback during recording",
        "Transcribed text inserted into editor",
        "Typecheck passes"
      ],
      "priority": 25,
      "passes": false,
      "notes": "Deferred - button exists but functionality not implemented"
    },
    {
      "id": "US-013",
      "title": "More options menu",
      "description": "As a user, I want additional options for notes via a menu.",
      "acceptanceCriteria": [
        "More options button in header",
        "Dropdown menu with additional actions",
        "Actions: Share, Export, Duplicate, Move to folder",
        "Typecheck passes"
      ],
      "priority": 26,
      "passes": false,
      "notes": "Deferred - button exists but menu not implemented"
    },
    {
      "id": "US-015",
      "title": "Search in note content",
      "description": "As a user, I want search to find text within note content, not just titles.",
      "acceptanceCriteria": [
        "Search queries note content (blocks)",
        "Highlight matching text in search results",
        "Show snippet of matching content",
        "Debounced search input",
        "Typecheck passes"
      ],
      "priority": 27,
      "passes": false,
      "notes": "Deferred - currently only searches titles"
    }
  ]
}

